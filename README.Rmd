---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r echo=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "figures/"
)
library(Rpriori)
```
[![Build Status](https://travis-ci.org/TimToebrock/Rpriori.svg?branch=master)](https://travis-ci.org/TimToebrock/Rpriori)


# Rpriori

The goal of `Rpriori` is to create association rules of type X=>Y by using the Apriori algorithm. For a more detailed demonstration of how the package works please consider the Demo file in the examples folder. This `README` only covers the most important features.

## Installation

You can install `Rpriori` from github with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("TimToebrock/Rpriori")
```

## Example: Creating association rules

This is a basic example which shows you how to create association rules with `Rpriori` using the `Groceries` dataset:

```{r example, message=FALSE, warning=FALSE}
data("Groceries")
Rules <- AssociationRules(Groceries, minsupport = 0.01)
show(Rules)
```

To create rules you need to supply `AssociationRules()` with a transactions database and a minimum support threshold. 
You can additionally set a minimum confidence threshold.

## Example: Inspecting data

To get summary statistics on the rules simply call `summary()`
```{r}
summary(Rules)
```

If you want to take a look at the underlying data used in rule creation there are multiple ways. One way is to use the `extract` function:
```{r}
Frequent <- extract(Rules)
summary(Frequent)
```
This extracts the frequent itemsets used to calculate association rules. You can also create a frequent itemmatrix directly:
```{r}
Frequent2 <- FindFrequentItemsets(Groceries, 0.01)
Frequent2
```
Since frequent item-set generation takes a lot longer than rule creation, it might be better to create a frequent item matrix first, and then use `AssociationRules()` to calculate rules.

```{r}
fRules <- AssociationRules(Groceries, Frequent, minsupport = 0.03, minconfidence = 0.4)
```
In this case `AssociationRules` won't need to recalculate the frequent item-sets if you do not lower the support threshold.

If you want to take a look at the transactions matrix used to calculate the frequent items you need to create a `TAMatrix` object first:
```{r}
Transactions <- makeTAMatrix(Groceries)
summary(Transactions)
```

## Example: Visualizing data with `plot()` or `qplot()`

All classes come with base plotting and `ggplot2` methods. Both `plot()` and `qplot()` only need to be supplied a valid object to work, however `qplot()` is more flexible and can sometimes be supplied with additional arguments like `col`or `alpha`.

###Plotting transactions
```{r}
plot(Transactions)
qplot(Transactions)
```

###Plotting frequent items
```{r}
plot(Frequent)
qplot(Frequent, type = "scatter", col = "red", alpha = 0.1)
```

###Plotting frequent items (as a histogram)
```{r}
hist(Frequent)
qplot(Frequent, type = "hist")
```

###Plotting rules
```{r}
plot(Rules)
qplot(Rules)
```

## Example: Using convenience functions like `support()`

There are a set of convenience functions to access certain slots easily.
```{r}
support(Frequent)[1:5]
support(Rules)[1:5]
confidence(Rules)[1:5]
lift(Rules)[1:5]
leverage(Rules)[1:5]
```

